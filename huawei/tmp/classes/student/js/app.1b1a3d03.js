(function(t){function e(e){for(var a,i,o=e[0],l=e[1],c=e[2],d=0,p=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(p.length)p.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],a=!0,o=1;o<n.length;o++){var l=n[o];0!==r[l]&&(a=!1)}a&&(s.splice(e--,1),t=i(i.s=n[0]))}return t}var a={},r={app:0},s=[];function i(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=a,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0878":function(t,e,n){},"37db":function(t,e,n){},"4c1a":function(t,e,n){"use strict";var a=n("0878"),r=n.n(a);r.a},"56d7":function(t,e,n){"use strict";n.r(e);n("d9a3"),n("c9db"),n("de3e"),n("618d");var a=n("0261"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("nav",{staticClass:"navbar navbar-expand-sm navbar-dark bg-primary"},[n("span",{staticClass:"navbar-brand"},[t._v("Human AI @ JLU")]),n("span",{staticClass:"navbar-text pr-5"},[t._v("智慧课堂")]),n("ul",{staticClass:"navbar-nav"},[t.login?n("li",{staticClass:"nav-item px-2"},[n("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v("你好,"+t._s(t.username))])]):t._e(),t.login?t._e():n("li",{staticClass:"nav-item px-2",class:{active:1===t.nav},attrs:{id:"nav_upload"},on:{click:function(e){return t.switchNav(1)}}},[n("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v("登录")])]),n("li",{staticClass:"nav-item px-2",class:{active:2===t.nav},attrs:{id:"nav_edit"},on:{click:function(e){return t.switchNav(2)}}},[n("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v("课程播放")])])])]),n("div",{staticClass:"container-fluid"},[1===t.nav?n("student-login",{on:{login:function(e){return t.loginSuccess(e)}}}):t._e(),2===t.nav?n("display-class"):t._e()],1)])},s=[],i=(n("d52a"),n("9d79"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container-fluid"},[n("br"),n("div",{staticClass:"container"},[n("form",{staticClass:"form"},[n("div",{staticClass:"form-group"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.currentSelectedClass,expression:"currentSelectedClass"}],staticClass:"form-control",attrs:{name:"currentClass",id:"current_class_selector"},on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.currentSelectedClass=e.target.multiple?n:n[0]},t.switchClass]}},[n("option",{attrs:{value:"0000"}},[t._v("点击选择你要观看的课程")]),t._l(t.classList,(function(e){return n("option",{key:e,domProps:{value:e}},[t._v(t._s(e)+" ")])}))],2)])])]),n("hr"),null!==t.pages?n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"row",staticStyle:{border:"1px solid gainsboro",position:"relative",height:"540px","box-sizing":"border-box",overflow:"hidden"}},[n("div",{staticClass:"col-xl-3",staticStyle:{height:"100%"}},[n("div",{staticStyle:{display:"flex","flex-direction":"column","justify-content":"flex-start","overflow-y":"scroll","border-right":"1px solid gainsboro","overflow-x":"hidden",height:"100%"}},t._l(t.pages,(function(e,a){return n("div",{key:a,staticStyle:{display:"flex","align-items":"center","justify-content":"center"}},[n("h6",{class:{"text-danger":a===t.currentPageIndex},staticStyle:{"text-align":"center"}},[t._v(" "+t._s(a+1)+" ")]),n("img",{class:{"border-red-3px":a===t.currentPageIndex},staticStyle:{margin:"5px",border:"1px solid gainsboro"},attrs:{src:"http://localhost:5500/"+t.currentSelectedClass+"/"+a+".jpg",width:"300",height:"200"},on:{click:function(e){return t.switchPage(a)}}})])})),0)]),n("div",{staticClass:"col-xl-9"},[n("div",{staticStyle:{position:"relative",opacity:"1","background-color":"white"}},[n("img",{staticStyle:{position:"absolute",top:"0",left:"200px","background-color":"white",opacity:"1"},attrs:{width:"960",height:"540",alt:"PPT edit background",src:"http://localhost:5500/"+t.currentSelectedClass+"/"+t.currentPageIndex+".jpg"}}),n("canvas",{staticClass:"ppt-page-canvas",staticStyle:{position:"absolute",left:"200px"},attrs:{id:"canvas_note_indicator",width:"960",height:"540"}}),n("div",{staticStyle:{padding:"0",margin:"0",position:"absolute",top:"0",left:"200px",width:"960px",height:"540px",overflow:"hidden"}},t._l(t.pages[t.currentPageIndex].pageNotes,(function(e,a){return n("span",{key:t.currentSelectedClass+"-"+t.currentPageIndex+"-"+a,staticStyle:{position:"absolute","font-size":"20px",cursor:"pointer",padding:"2px 50px 2px 5px","border-radius":"22px","background-color":"#2a93ca",opacity:"1",color:"white"},style:{left:e.x+e.width-78+"px",top:e.y+e.height-35+"px"},attrs:{id:"ppt_note_item_"+a,"data-index":a,"data-x":e.x,"data-y":e.y,"data-width":e.width,"data-height":e.height},on:{click:function(e){return t.playNoteAudio(t.currentPageIndex+1+"-"+(a+1))}}},[n("i",{staticClass:"fas fa-volume-up"})])})),0)])])])]):t._e()])}),o=[],l=(n("4178"),n("fc88"),n("e350"),n("7ae7"),n("af82"),n("3a20"),n("b3f9"),n("ef8e"),n("3e5e"),n("94ec"),n("9a14"),n("252a"),n("b449"),n("e980"));n("84f7"),n("5897"),n("f9b0"),n("0b1e"),n("cf52");function c(t){return u.apply(this,arguments)}function u(){return u=Object(l["a"])(regeneratorRuntime.mark((function t(e){var n,a=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},t.abrupt("return",new Promise((function(t,a){var r=new XMLHttpRequest;r.open("GET",e),Object.keys(n).forEach((function(t){r.setRequestHeader(t,n[t])})),r.onload=function(){t(r.responseText)},r.onerror=function(t){a(t)},r.send()})));case 2:case"end":return t.stop()}}),t)}))),u.apply(this,arguments)}function d(){var t=document.getElementById("global_cover");if(t)t.style.display="block";else{var e=document.createElement("div");e.style.backgroundColor="black",e.style.opacity="0.6",e.style.width="100%",e.style.height="100%",e.style.position="fixed",e.style.left=0,e.style.top=0,e.id="global_cover",e.style.zIndex=500,document.body.appendChild(e)}}function p(){var t=document.getElementById("global_cover");t&&(t.style.display="none")}function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"加载中...",e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e?d():p();var n=document.getElementById("loading_wrapper");if(n)return n.style.display="flex",void(document.getElementById("loading_text").innerText=t);var a=document.createElement("div");a.style.width="100%",a.style.height="100%",a.style.position="fixed",a.style.left=0,a.style.top=0,a.style.display="flex",a.style.justifyContent="center",a.style.alignItems="center",a.id="loading_wrapper",a.style.zIndex=501;var r=document.createElement("div");r.className="spinner-border text-light",a.appendChild(r);var s=document.createElement("h3");s.innerText=t,s.id="loading_text",s.style.color="white",s.style.padding="40px",s.style.margin=0,a.appendChild(s),document.body.appendChild(a)}function v(){p();var t=document.getElementById("loading_wrapper");t&&(t.style.display="none",document.getElementById("loading_text").innerText="加载中...")}var g=n("5d40"),h={name:"DisplayClass",data:function(){return{studentName:"student1",emotions:{},classList:[],pages:null,currentSelectedClass:"0000",currentPageIndex:0}},methods:{playNoteAudio:function(t){t="voice_results/"+t+".wav",console.log(t);var e=new g["Howl"]({src:[t],format:["mp4","m4a","wav"]});e.play()},switchClass:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("0000"!==t.currentSelectedClass){e.next=4;break}return t.pages=null,t.currentPageIndex=0,e.abrupt("return");case 4:if(t.pages=null,t.currentPageIndex=0,f(),e.prev=7,"localhost:5500"!==location.host){e.next=14;break}return e.next=11,c("http://localhost:5500/".concat(t.currentSelectedClass,"/emotion_results/").concat(t.studentName,".txt"));case 11:n=e.sent,e.next=17;break;case 14:return e.next=16,c("emotion_results/".concat(t.studentName,".txt"));case 16:n=e.sent;case 17:return console.log(n),a={},n.trim().split("\n").forEach((function(t){""!==t&&(console.log(t),a[t.split(":")[0]]=t.split(":")[1])})),console.log(a),t.emotions=a,e.t0=JSON,e.next=25,c("http://localhost:5000/get_class_data?className="+t.currentSelectedClass);case 25:e.t1=e.sent,r=e.t0.parse.call(e.t0,e.t1),r.ok?t.pages=r.data.pages:alert(r.message),e.next=34;break;case 30:e.prev=30,e.t2=e["catch"](7),console.log(e.t2),alert("课程数据加载失败, 请检查网络连接");case 34:v(),t.drawNoteIndicator(t.currentPageIndex);case 36:case"end":return e.stop()}}),e,null,[[7,30]])})))()},switchPage:function(t){this.currentPageIndex=t,this.drawNoteIndicator(t)},drawNoteIndicator:function(t){var e=this,n=this;setTimeout((function(){var a=n.pages[t].pageNotes,r=document.getElementById("canvas_note_indicator"),s=r.getContext("2d");s.clearRect(0,0,960,640),s.lineWidth=1,s.strokeStyle="#2a93ca";var i=1,o=!0,l=!1,c=void 0;try{for(var u,d=a[Symbol.iterator]();!(o=(u=d.next()).done);o=!0){var p=u.value,f="".concat(e.currentPageIndex+1,"-").concat(i);"negative"===e.emotions[f]&&(s.strokeStyle="#ca2a3f"),s.strokeRect(p.x,p.y,p.width,p.height),i++,s.strokeStyle="#2a93ca"}}catch(v){l=!0,c=v}finally{try{o||null==d.return||d.return()}finally{if(l)throw c}}}),300)}},mounted:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return f(),e.prev=1,e.t0=JSON,e.next=5,c("http://localhost:5000/get_class_list");case 5:e.t1=e.sent,n=e.t0.parse.call(e.t0,e.t1),n.ok?t.classList=n.data:alert(n.message),e.next=14;break;case 10:e.prev=10,e.t2=e["catch"](1),console.log(e.t2),alert("加载课程列表失败, 请检查网络连接状况");case 14:v();case 15:case"end":return e.stop()}}),e,null,[[1,10]])})))()}},m=h,y=(n("5f8d"),n("623f")),x=Object(y["a"])(m,i,o,!1,null,"44f23a0d",null),b=x.exports,_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"root container"},[t._m(0),n("hr"),n("br"),n("br"),n("div",[n("form",{staticClass:"form"},[n("div",{staticClass:"form-group"},[n("label",[t._v("学生姓名:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{required:"",placeholder:"请输入"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),n("br"),n("br"),n("div",{staticClass:"form-group"},[n("label",[t._v("学号:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.userId,expression:"userId"}],attrs:{required:"",placeholder:"请输入"},domProps:{value:t.userId},on:{input:function(e){e.target.composing||(t.userId=e.target.value)}}})])]),n("br"),n("br"),n("button",{on:{click:function(e){return t.login(t.username)}}},[t._v("登录")])])])},w=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"title"},[n("h3",[t._v("学生登录")])])}],C={name:"StudentLogin",data:function(){return{username:"",userId:""}},methods:{login:function(){this.$emit("login",this.username)}}},k=C,S=(n("4c1a"),Object(y["a"])(k,_,w,!1,null,"733738cc",null)),I=S.exports,P={name:"app",components:{StudentLogin:I,DisplayClass:b},data:function(){return{nav:1,login:!1,username:null}},methods:{switchNav:function(t){(1!==this.nav||this.login)&&(this.nav=t)},loginSuccess:function(t){this.login=!0,this.username=t,this.switchNav(2)}}},j=P,N=(n("a258"),Object(y["a"])(j,r,s,!1,null,"8ff479ae",null)),O=N.exports;a["a"].config.productionTip=!1,new a["a"]({render:function(t){return t(O)}}).$mount("#app")},"5f8d":function(t,e,n){"use strict";var a=n("37db"),r=n.n(a);r.a},a258:function(t,e,n){"use strict";var a=n("e2f4"),r=n.n(a);r.a},e2f4:function(t,e,n){}});
//# sourceMappingURL=app.1b1a3d03.js.map